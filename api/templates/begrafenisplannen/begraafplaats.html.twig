{% extends "base.html.twig" %}

{% block content %}

    <div class="row">

        <div class="col-md-7  col-sm-12">

            <div class="content-background">
                <div class="content">

                    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
                    <link rel="stylesheet" href="/resources/demos/style.css">
                    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
                    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

                    <script>

                        CreateSearchBox( "Gemeente", false, "m" );
                        CreateSearchBox( "Begraafplaats", true, "l" );
                        CreateSearchBox( "Grafsoort", true, "l" );

                        function CreateSearchBox( name, disabled, inputSize )
                        {
                            var namePlural = name + "en";
                            if (name.substring(name.length-1) == "e")
                            {
                                namePlural = name + "s";
                            }

                            $( function() {
                                $.widget( "custom.combobox", {
                                    _create: function() {
                                        this.wrapper = $( "<div>" )
                                            .addClass( "input__control-group" )
                                            .insertAfter( this.element );

                                        this.element.hide();
                                        this._createAutocomplete();
                                        this._createShowAllButton();
                                    },

                                    _createAutocomplete: function() {
                                        var selected = this.element.children( ":selected" ),
                                            value = selected.val() ? selected.text() : "",
                                            wasOpen = false;

                                        this.input = $( "<input>" )
                                            .appendTo( this.wrapper )
                                            .val( value )
                                            .attr( "title", "" )
                                            .attr( "placeholder", name )
                                            .attr( "disabled", disabled )
                                            .attr( "id", "autocomplete-" + name.toLowerCase() )
                                            .addClass( "input__control input__control--" + inputSize + " input__control--search" )
                                            .autocomplete({
                                                delay: 0,
                                                minLength: 0,
                                                source: $.proxy( this, "_source" )
                                            })
                                            .tooltip({
                                                classes: {
                                                    "ui-tooltip": "ui-state-highlight"
                                                }
                                            });

                                        this._on( this.input, {
                                            autocompleteselect: function( event, ui ) {
                                                ui.item.option.selected = true;
                                                this._trigger( "select", event, {
                                                    item: ui.item.option
                                                });
                                            },

                                            autocompletechange: "_removeIfInvalid"
                                        });
                                    },

                                    _createShowAllButton: function() {
                                        var input = this.input,
                                            wasOpen = false;

                                        this.wrapper = $( "<button>" )
                                            .attr( "tabIndex", -1 )
                                            .attr( "title", "Toon alle " + namePlural )
                                            .attr( "type", "button" )
                                            .attr( "id", "showAllButton-" + name.toLowerCase() )
                                            .tooltip()
                                            .appendTo( this.wrapper )
                                            .button({
                                                text: false
                                            })
                                            .removeClass( "ui-corner-all" )
                                            .addClass( "btn btn--icon" )
                                            .on( "mousedown", function() {
                                                wasOpen = input.autocomplete( "widget" ).is( ":visible" );
                                            })
                                            .on( "click", function() {
                                                input.trigger( "focus" );

                                                // Close if already visible
                                                if ( wasOpen ) {
                                                    return;
                                                }

                                                // Pass empty string as value to search for, displaying all results
                                                input.autocomplete( "search", "" );
                                            })
                                            .attr( "disabled", disabled );

                                        this._createShowAllButtonIcon();
                                    },

                                    _createShowAllButtonIcon() {
                                        $( "<i>" )
                                            .appendTo( this.wrapper )
                                            .addClass( "icon icon-chevron-down" );
                                    },

                                    _source: function( request, response ) {
                                        var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                                        response( this.element.children( "option" ).map(function() {
                                            var text = $( this ).text();
                                            if ( this.value && ( !request.term || matcher.test(text) ) )
                                                return {
                                                    label: text,
                                                    value: text,
                                                    option: this
                                                };
                                        }) );
                                    },

                                    _removeIfInvalid: function( event, ui ) {

                                        // Selected an item, nothing to do
                                        if ( ui.item ) {
                                            return;
                                        }

                                        // Search for a match (case-insensitive)
                                        var value = this.input.val(),
                                            valueLowerCase = value.toLowerCase(),
                                            valid = false;
                                        this.element.children( "option" ).each(function() {
                                            if ( $( this ).text().toLowerCase() === valueLowerCase ) {
                                                this.selected = valid = true;
                                                return false;
                                            }
                                        });

                                        // Found a match, nothing to do
                                        if ( valid ) {
                                            return;
                                        }

                                        // Remove invalid value
                                        this.input
                                            .val( "" )
                                            .attr( "title", "'" + value + "' kwam niet overeen met een " + name.toLowerCase() )
                                            .tooltip( "open" );
                                        this.element.val( "" );
                                        this._delay(function() {
                                            this.input.tooltip( "close" ).attr( "title", "" );
                                        }, 2500 );
                                        this.input.autocomplete( "instance" ).term = "";
                                    },

                                    _destroy: function() {
                                        this.wrapper.remove();
                                        this.element.show();
                                    }
                                });

                                $( "#"+name ).combobox();
                                $( "#toggle" ).on( "click", function() {
                                    $( "#"+name ).toggle();
                                });
                            } );
                        }
                    </script>

                    <script>
                        function enableBegraafplaats() {
                            document.getElementById("autocomplete-begraafplaats").disabled = false;
                            document.getElementById("showAllButton-begraafplaats").disabled = false;
                            document.getElementById("selectBegraafplaats").disabled = false;
                        }
                        function enableGrafsoort() {
                            document.getElementById("autocomplete-grafsoort").disabled = false;
                            document.getElementById("showAllButton-grafsoort").disabled = false;
                            document.getElementById("selectGrafsoort").disabled = false;
                        }
                    </script>

                    <h2>Begraafplaats</h2>

                    <!-- Page Break -->
                    <div style="height: 20px;"></div>

                    <form class="form" method="post" action="#" autocomplete="off">

                        <h3>Selecteer een Gemeente</h3>
                        <select id="Gemeente">
                            <option value="">Selecteer een Gemeente</option>
                            <option value="Drechterland">Drechterland</option>
                            <option value="Enkhuizen">Enkhuizen</option>
                            <option value="Hoorn">Hoorn</option>
                            <option value="Koggenland">Koggenland</option>
                            <option value="Drechterland">Drechterland</option>
                            <option value="Medemblik">Medemblik</option>
                            <option value="Stede Broec">Stede Broec</option>
                        </select>
                        <!-- Page Break -->
                        <div style="height: 20px;"></div>
                        <div class="input">
                            <button type="button" onclick="enableBegraafplaats()" class="btn btn--primary" name="selectGemeente">Selecteren</button>
                        </div>

                        <!-- Page Break -->
                        <div style="height: 20px;"></div>

                        <h3>Selecteer een Begraafplaats</h3>
                        <select id="Begraafplaats">
                            <option value="">Selecteer een Begraafplaats</option>
                            {% for cemetery in cemeteries['hydra:member'] %}
                            <option value="{{ cemetery['@id'] }}">{{ (cemetery['reference']) }}</option>
                            {% endfor %}
                        </select>
                        <!-- Page Break -->
                        <div style="height: 20px;"></div>
                        <div class="input">
                            <button disabled="" type="button" onclick="enableGrafsoort()" class="btn btn--primary" name="selectBegraafplaats" id="selectBegraafplaats">Selecteren</button>
                        </div>

                        <!-- Page Break -->
                        <div style="height: 20px;"></div>

                        <h3>Selecteer het Soort Graf</h3>
                        <select id="Grafsoort">
                            <option value="">Selecteer een Grafsoort</option>
                            <option value="Grafsoort1">Grafsoort1</option>
                            <option value="Grafsoort2">Grafsoort2</option>
                            <option value="Grafsoort3">Grafsoort3</option>
                        </select>
                        <!-- Page Break -->
                        <div style="height: 20px;"></div>
                        <div class="input">
                            <button disabled="" type="button" class="btn btn--primary" name="selectGrafsoort" id="selectGrafsoort">Selecteren</button>
                        </div>

                        <!-- Page Break -->
                        <div style="height: 20px;"></div>

                        <div class="input">
                            <button type="submit" class="btn" name="submit" value="save">Opslaan</button> of naar <a href="{{ path('app_default_index') }}">home</a>
                        </div>
                    </form>

                </div><!-- /.content -->
            </div><!-- /.content-background -->
        </div><!-- /.col -->

        <div class="col-md-5 col-sm-12">

    <div class="content-background" >
        <div class="content">

            <div class="content-background">
                <div class="content">
                    <h2>Stappen</h2>
                    <ul class="list list--timeline list--timeline-compact">
                        <li class="list__item list__item--active"><a href="{{ path('app_begrafenisplannen_begraafplaats') }}">Begraafplaats</a></li>
                        <li class="list__item"><a href="{{ path('app_begrafenisplannen_datumtijd') }}">Datum & Tijd</a></li>
                        <li class="list__item"><a href="{{ path('app_begrafenisplannen_artikelen') }}">Artikelen</a></li>
                        <li class="list__item"><a href="{{ path('app_begrafenisplannen_overledene') }}">Overledene</a></li>
                        <li class="list__item"><a href="{{ path('app_begrafenisplannen_belanghebbende') }}">Belanghebbende</a></li>
                        <li class="list__item list__item--disabled"><a href="{{ path('app_begrafenisplannen_bevestiging') }}">Bevestiging</a></li>
                    </ul>
                </div>
            </div>

        </div><!-- /.content -->
    </div><!-- /.content-background -->

    <!-- Page Break -->
    <div style="height: 20px"></div>

    <div class="content-background" >
        <div class="content">

            <h2>Begrafenis</h2>

            <ul class="definition-list">
                <li class="definition-list__item definition-list__item--horizontal">
                    <div class="definition-list__title">
                        Begraafplaats
                    </div>
                    <div class="definition-list__description">
                        <p>Gekozen begraafplaats</p>
                    </div>
                </li>
                <li class="definition-list__item definition-list__item--horizontal">
                    <div class="definition-list__title">
                        Datum & Tijd
                    </div>
                    <div class="definition-list__description">
                        <p>Gekozen Datum & Tijd</p>
                    </div>
                </li>
                <li class="definition-list__item definition-list__item--horizontal">
                    <div class="definition-list__title">
                        Artikelen
                    </div>
                    <div class="definition-list__description">
                        <p>Gekozen Artikelen</p>
                    </div>
                </li>
                <li class="definition-list__item definition-list__item--horizontal">
                    <div class="definition-list__title">
                        Overledene
                    </div>
                    <div class="definition-list__description">
                        <p>Gekozen Overledene</p>
                    </div>
                </li>
                <li class="definition-list__item definition-list__item--horizontal">
                    <div class="definition-list__title">
                        Belanghebbende
                    </div>
                    <div class="definition-list__description">
                        <p>Gekozen Belanghebbende</p>
                    </div>
                </li>
            </ul>

        </div><!-- /.content -->
    </div><!-- /.content-background -->

</div><!-- /.col -->
</div>

{% endblock %}
