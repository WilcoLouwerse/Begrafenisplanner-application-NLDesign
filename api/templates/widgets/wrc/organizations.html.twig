<script>
    function enableBegraafplaats()
    {
        var dropdownGemeente = document.getElementById("dropdown-gemeente");
        var dropdownBegraafplaats = document.getElementById("dropdown-begraafplaats");
        if(dropdownGemeente.selectedIndex != 0) {
            dropdownBegraafplaats.disabled = false;
        }
    }
</script>

{% set organizations = commonground_resource_list({'component':'wrc', 'type':'organizations'})['hydra:member'] %}
<div class="input combobox" id="gemeente_combobox">
    <div class="input__hint">Selecteer een Gemeente</div>
    <select name="properties[gemeente]" onclick="enableBegraafplaats()" id="dropdown-gemeente" class="input__control input__control--m input__control--select">
        <option hidden="" value="Selecteer een Gemeente">Selecteer een Gemeente</option>
        {% for organization in organizations %}
            <option value="{{ organization['@id'] }}">{{ organization['name'] }}</option>
        {% endfor %}
    </select>
</div>

<script>
    var dropdownGemeente = document.getElementById("dropdown-gemeente");
    var selectedIndex = 0;

    {% if request.properties.gemeente is defined and request.properties.gemeente is not empty %}
    for (var i=0; i < dropdownGemeente.length; i++) {
        if(dropdownGemeente[i].value == "{{ request.properties.gemeente }}") {
            selectedIndex = i;
        }
    }
    {% else %}
    document.getElementById("dropdown-begraafplaats").disabled = true;
    {% endif %}
    dropdownGemeente.selectedIndex = selectedIndex;
</script>
